# üí∏ Neurix Group Expense Tracker

A full-stack group expense management and chat application, featuring a FastAPI backend and a modern React (Vite) frontend.

---

## üöÄ Quick Setup & Run

### 1. Prerequisites

- Docker & Docker Compose installed

### 2. Start the Full Stack App

```sh
# From the project root
docker-compose up --build
```

- Backend: http://localhost:8000
- Frontend: http://localhost:3000

---

## üõ†Ô∏è Manual Setup (Dev Mode)

### Backend

```sh
cd backend
pip install -r requirements.txt
uvicorn main:app --reload
```

### Frontend

```sh
cd frontend
npm install
npm run dev
```

---

## üìö API Documentation

### User Endpoints

| Method | Endpoint                                  | Description                       |
| ------ | ----------------------------------------- | --------------------------------- |
| POST   | `/signup`                                 | Register a new user               |
| POST   | `/login`                                  | Login with username               |
| GET    | `/users/{user_id}/groups`                 | Get all groups for a user         |
| GET    | `/users/{user_id}/balances`               | Get all balances for a user       |
| POST   | `/users/payBack`                          | Settle/pay back an expense        |
| POST   | `/users/{user_id}/create_session`         | Create a new chat session         |
| GET    | `/users/{user_id}/query/{session_id}`     | Query a chat session              |
| GET    | `/users/{user_id}/load_all_chat`          | Load all chat sessions for a user |
| GET    | `/users/{user_id}/load_chat/{session_id}` | Load a specific chat session      |

### Group Endpoints

| Method | Endpoint                      | Description                  |
| ------ | ----------------------------- | ---------------------------- |
| POST   | `/groups`                     | Create a new group           |
| GET    | `/groups/{group_id}`          | Get group details            |
| POST   | `/groups/{group_id}/expenses` | Add a new expense to a group |
| GET    | `/groups/{group_id}/balances` | Get balances for a group     |

### Miscellaneous

| Method | Endpoint | Description          |
| ------ | -------- | -------------------- |
| GET    | `/`      | Health check (Hello) |

---

## üìù Assumptions

- MongoDB is available and accessible to the backend (update connection string in backend if needed).
- The backend and frontend communicate via RESTful APIs.
- All endpoints require valid data; no authentication middleware is implemented by default.
- The frontend expects the backend to be running at `http://localhost:8000` (update in frontend config if changed).
- Chat features are powered by LangChain and require proper API keys/configuration if using external LLMs.

---

## üì¶ Tech Stack

- **Backend:** FastAPI, MongoDB (MongoEngine), LangChain
- **Frontend:** React, Vite, Tailwind CSS, Redux
- **Containerization:** Docker, Docker Compose

---

## ü§ñ Advanced Chat & Query Features (AI-Powered)

The backend includes a powerful AI-driven chat and query system (see `backend/controllers/chat_controller.py`) with the following features:

- **Natural Language to MongoEngine Query:** Converts user questions about expenses, groups, or users into safe, executable MongoEngine queries using LLMs (Google Gemini via LangChain).
- **Multi-step Query Support:** Handles both simple and complex queries, including those requiring multi-step logic (e.g., simulated joins).
- **Secure Code Execution:** Only allows safe, minimal Python code for database queries‚Äîno imports, print statements, or unsafe operations.
- **Session-based Chat:** Each user can create chat sessions, with summaries and titles generated by AI for easy reference.
- **Automatic Summarization:** Chat history and summaries are updated after each query, providing context-aware responses.
- **Markdown-formatted Results:** Query results are returned in a user-friendly, Markdown format for clarity.
- **Extensible Prompt Templates:** Easily adapt prompts for new models or query types.

---

## üìÑ Additional Documentation

- For more details on backend features and API, see `backend/README.md`.
- For frontend features, pages, and dependencies, see `frontend/README.md`.

---

## ‚ú® Enjoy seamless group expense management and chat with Neurix!
